## Лабораторная работа № 9. Мониторинг Windows Server 2012: средства мониторинга, Монитор производительности, журналы событий

### Цель работы
Освоить встроенные средства мониторинга Windows Server 2012:
* изучить интерфейс и возможности «Монитора производительности»;
* научиться создавать сборщики данных и анализировать графики;
* освоить работу с журналами событий (Event Viewer);
* сформировать навыки диагностики системных проблем на основе данных мониторинга.

### Теоретические сведения

**Основные инструменты мониторинга в Windows Server 2012:**

1. **Монитор производительности** (`perfmon.msc`) — позволяет:
   * отслеживать загрузку CPU, памяти, дисков, сети;
   * создавать наборы сборщиков данных;
   * анализировать производительность в реальном времени и по логам;
   * генерировать отчёты.

2. **Просмотр событий** (`eventvwr.msc`) — централизованная система журналирования:
   * системные события (System);
   * события приложений (Application);
   * события безопасности (Security);
   * настраиваемые журналы.

3. **Системный монитор ресурсов** (`resmon`) — упрощённый интерфейс для быстрого анализа загрузки ресурсов.

**Ключевые метрики производительности:**
* **CPU**: % Processor Time, Queue Length.
* **Память**: Available MBytes, Page Faults/sec.
* **Диск**: Disk Queue Length, Bytes/sec.
* **Сеть**: Bytes Total/sec, Packets/sec.

### Оборудование и ПО
* Виртуальная машина: Windows Server 2012 R2 (минимум 2 ГБ ОЗУ, 2 vCPU).
* Гипервизор (VMware, VirtualBox, Hyper‑V).

### Ход работы

#### 1. Знакомство с Монитором производительности
1. Откройте **Монитор производительности** (`perfmon.msc`).
2. Изучите интерфейс:
   * левая панель — дерево оснасток;
   * центральная область — графики/таблицы;
   * нижняя панель — список счётчиков.
3. Добавьте базовые счётчики:
   * щёлкните **+** на панели инструментов;
   * выберите объекты: **Processor**, **Memory**, **PhysicalDisk**, **Network Interface**;
   * для каждого объекта добавьте ключевые счётчики (см. теоретические сведения);
   * нажмите **Добавить** → **ОК**.
4. Наблюдайте за графиками в реальном времени (5–10 мин).

#### 2. Создание набора сборщиков данных
1. В дереве консоли перейдите: **Группы сборщиков данных** → **Пользовательские**.
2. Щёлкните правой кнопкой → **Создать группу сборщиков данных** → **Пустой шаблон**.
3. Укажите имя (например, `Lab_Performance_Log`).
4. На шаге **Выбор счётчиков производительности** добавьте:
   * **Processor** → % Processor Time;
   * **Memory** → Available MBytes;
   * **PhysicalDisk** → Disk Bytes/sec;
   * **Network Interface** → Bytes Total/sec.
5. Настройте интервал сбора: **15 секунд**.
6. Укажите путь для логов (например, `C:\PerfLogs\Lab`).
7. Запустите сбор данных: правой кнопкой по группе → **Запустить**.
8. Соберите данные в течение 10 мин, затем остановите группу.

#### 3. Анализ логов производительности
1. В дереве консоли перейдите: **Особые**.
2. Щёлкните по созданному логу.
3. Изучите графики:
   * определите пики загрузки CPU/памяти;
   * найдите периоды высокой дисковой активности;
   * сопоставьте события с временными отметками.
4. Щёлкните по пустому месту правой кнопкой мыши → **Сохранить данные как** (в формате CSV)

#### 4. Работа с журналами событий
1. Откройте **Просмотр событий** (`eventvwr.msc`).
2. Изучите основные журналы:
   * **Система** — события ОС и драйверов;
   * **Приложение** — логи программ;
   * **Безопасность** — аудит входа/выхода, доступа к ресурсам.
3. Фильтрация событий:
   * в журнале **Система** щёлкните **Фильтр текущего журнала**;
   * укажите уровень: **Ошибка** и **Предупреждение**;
   * примените фильтр.
4. Анализ конкретного события:
   * дважды щёлкните по записи;
   * изучите: код события, источник, время, описание;
   * запишите 2–3 примера ошибок/предупреждений.
5. Создание настраиваемого представления:
   * в дереве консоли щёлкните **Настраиваемые представления**;
   * **Создать настраиваемое представление** → отметьте **Ошибка** и **Критическое**;
   * укажите журналы: **Система**, **Приложение**;
   * задайте имя (например, `Critical_Events`).

#### 5. Диагностика на основе данных мониторинга
1. Имитируйте нагрузку:
   * откройте **Диспетчер задач** → вкладка **Производительность**;
   * запустите ресурсоёмкую операцию (например, копирование большого файла).
2. В **Мониторе производительности** наблюдайте за изменением графиков.
3. В **Просмотр событий** проверьте появление новых записей в журнале **Система**.
4. Сопоставьте:
   * пики загрузки CPU с событиями в логах;
   * ошибки дисковой подсистемы с показателями Disk Queue Length.

#### 6. Создание отчёта
1. В **Мониторе производительности** перейдите: **Отчёты** → **Наборы сборщиков данных**.
2. Щёлкните по пустому месту в своем логе → **Сохранить параметры как**.
3. Выберите параметры:
   * период: последние 10 мин;
   * метрики: CPU, память, диск, сеть;
   * формат: HTML.
4. Сохраните отчёт в `C:\Reports\PerfReport.html`.

### Контрольные вопросы
1. Какие основные инструменты мониторинга есть в Windows Server 2012?
2. Как добавить счётчики производительности в «Монитор производительности»?
3. Что такое сборщики данных и для чего они нужны?
4. Какие ключевые метрики следует отслеживать для диагностики узких мест системы?
5. Как отфильтровать события по уровню важности в «Просмотр событий»?
6. Где хранятся логи производительности, созданные сборщиками данных?
7. Как связать события из журнала с пиками загрузки ресурсов?
8. Какие типы событий записываются в журнал «Безопасность»?

### Отчёт по работе
Предоставьте:
1. Скриншот «Монитора производительности» с добавленными счётчиками.
2. Скриншот настроек сборщика данных (список счётчиков).
3. Фрагмент лога производительности (график CPU/памяти).
4. Скриншот отфильтрованных событий в «Просмотр событий» (ошибки/предупреждения).
5. Скриншот настраиваемого представления `Critical_Events`.
6. Краткое описание 2–3 выявленных проблем (например, высокая загрузка диска) и возможных причин.
7. Ответы на контрольные вопросы.

### Вывод
В ходе лабораторной работы:
* освоены базовые функции «Монитора производительности» и «Просмотра событий»;
* создан и настроен сборщик данных для долгосрочного мониторинга;
* проанализированы логи производительности и событий;
* сформированы навыки диагностики системных проблем.


Подтверждена эффективность встроенных инструментов Windows Server 2012 для контроля стабильности и производительности серверной инфраструктуры.