## Лабораторная работа № 6. Настройка удалённого рабочего стола (RDP) между Windows Server и Windows 10

### Цель работы
Изучить принцип работы протокола RDP (Remote Desktop Protocol), освоить процедуру настройки удалённого подключения от клиентской ОС (Windows 10) к серверной (Windows Server).

### Теоретические сведения

**RDP (Remote Desktop Protocol)** — протокол прикладного уровня для удалённого управления компьютером с графическим интерфейсом. Обеспечивает:
* передачу изображения рабочего стола;
* обработку ввода с клавиатуры и мыши;
* перенаправление локальных ресурсов (диски, принтеры, буфер обмена).

**Основные компоненты:**
* **RDP‑сервер** — служба на удалённой системе, принимающая подключения (в Windows — `TermService`).
* **RDP‑клиент** — приложение на локальной машине для подключения (в Windows — `mstsc.exe`).

**Порт по умолчанию:** TCP 3389.

**Требования для работы:**
* включённый RDP на сервере;
* учётная запись с правами доступа;
* сетевое подключение между клиентом и сервером;
* разрешённые правила в брандмауэре.

### Оборудование и ПО
* Виртуальная машина 1: Windows Server (версия по выбору).
* Виртуальная машина 2: Windows 10 (версия по выбору).
* Гипервизор (VMware, VirtualBox, Hyper‑V).

### Ход работы

#### 1. Подготовка виртуальной инфраструктуры
1. Разверните две виртуальные машины:
   * VM1: Windows Server.
   * VM2: Windows 10.
2. Настройте сеть:
   * Убедитесь, что обе ВМ находятся в одной виртуальной сети (например, «Внутренний сетевой адаптер» в Hyper‑V или «Сеть только для хоста» в VirtualBox).
   * Проверьте связность: выполните `ping` между машинами.

#### 2. Настройка Windows Server (RDP‑сервер)
1. Включите RDP:
   * Откройте **«Параметры»** → **«Система»** → **«Удаленный рабочий стол»**.
   * Переведите переключатель в положение **«Включить»**.
   * Подтвердите действие.

2. Настройте пользователей:
   * Нажмите **«Выбрать пользователей»**.
   * Добавьте учётную запись, которой разрешён доступ (например, администратора).
   * Если нужно, создайте отдельную учётную запись для RDP.

3. Проверьте брандмауэр:
   * Откройте **Панель управления** → **Система и безопасность** → **Брандмауэр Защитника Windows**.
   * Перейдите в **«Разрешить приложение или компонент через брандмауэр»**.
   * Убедитесь, что **«Удаленный рабочий стол»** разрешён для частных и публичных сетей (или только для частных, если сеть доверенная).

4. Узнайте IP‑адрес сервера:
   * Откройте командную строку (`cmd`).
   * Выполните:  
     ```
     ipconfig
     ```
   * Запишите IPv4‑адрес (например, `192.168.1.10`).

#### 3. Настройка Windows 10 (RDP‑клиент)
1. Проверьте, что RDP‑клиент установлен:
   * В Windows 10 он встроен. Запустить можно:
     * через поиск: введите **«Подключение к удаленному рабочему столу»**;
     * сочетанием клавиш `Win + R`, затем введите `mstsc` и нажмите **Enter**.

2. Подготовьте данные для подключения:
   * IP‑адрес сервера (из п. 2.4);
   * имя пользователя и пароль учётной записи с правами RDP.

#### 4. Установление RDP‑соединения
1. На Windows 10 запустите **Подключение к удаленному рабочему столу** (`mstsc`).
2. В поле **«Компьютер»** введите IP‑адрес сервера (например, `192.168.1.10`).
3. Нажмите **«Подключить»**.
4. В появившемся окне авторизации:
   * Введите имя пользователя (например, `Administrator` или созданную учётную запись).
   * Введите пароль.
   * Отметьте **«Запомнить учетные данные»** (опционально).
5. Нажмите **«ОК»**.
6. Если появится предупреждение о сертификате, нажмите **«Да»** (для лабораторной работы это допустимо).

#### 5. Проверка работоспособности
1. После подключения вы увидите рабочий стол Windows Server.
2. Протестируйте:
   * откройте проводник;
   * создайте файл на рабочем столе;
   * проверьте работу клавиатуры и мыши.
3. Завершите сеанс:
   * Нажмите **`Alt + F4`** или выберите **«Выход»** в меню **«Пуск»**.
   * В окне RDP нажмите **«Отключить»**.

#### 6. Дополнительные настройки
1. Изменение порта RDP (для безопасности):
   * На сервере откройте **Редактор реестра** (`regedit`).
   * Перейдите:  
     ```
     HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp\PortNumber
     ```
   * Измените значение на другой порт (например, `3390`).
   * Перезапустите службу:  
     ```
     net stop TermService && net start TermService
     ```
   * На клиенте в `mstsc` укажите порт через двоеточие: `192.168.1.10:3390`.

2. Ограничение доступа по IP:
   * В брандмауэре создайте правило для TCP 3389, разрешив только IP клиента.

### Контрольные вопросы
1. Что такое RDP и для каких задач он применяется?
2. Какой порт использует RDP по умолчанию?
3. Какие шаги необходимы для включения RDP на Windows Server?
4. Как проверить, что клиент может «видеть» сервер в сети?
5. Почему может возникнуть ошибка «Не удаётся подключиться» и как её устранить?


### Отчёт по работе
Предоставьте:
1. Скриншоты настройки удаленного доступа
2. Скриншот окна `mstsc` с введённым IP‑адресом сервера.
3. Скриншот рабочего стола Windows Server, открытого через RDP.
4. Описание возникших проблем и способов их решения (если были).
5. Ответы на контрольные вопросы.

### Вывод
В ходе лабораторной работы изучен принцип работы RDP, выполнена настройка удалённого подключения между Windows 10 (клиент) и Windows Server (сервер). Подтверждена работоспособность соединения и возможность управления сервером через графический интерфейс.